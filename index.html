<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S·ª± ki·ªán l·∫≠t th·∫ª Play Together</title>
    <style>
        /* CSS: Giao di·ªán v√† Style */
        body {
            background-color: #1a1a1a; /* M√†u n·ªÅn t·ªëi */
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 20px;
        }

        h1 {
            font-weight: normal;
            margin-bottom: 20px;
        }

        /* B·ªô ƒë·∫øm ng∆∞·ª£c */
        .timer-container {
            margin-bottom: 20px;
            font-size: 1.1em;
        }
        .timer-icon {
            margin-right: 5px;
        }

        /* Khu v·ª±c ƒëi·ªÅu khi·ªÉn (Input + Button) */
        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        input {
            padding: 8px;
            border-radius: 4px;
            border: none;
            width: 50px;
            text-align: center;
            font-size: 16px;
        }

        button {
            padding: 8px 15px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            background-color: #f0f0f0;
            color: #333;
            font-weight: bold;
            transition: background 0.3s;
        }

        button:hover {
            background-color: #ccc;
        }

        button.btn-back {
            background-color: #ddd;
        }

        /* L∆∞·ªõi Game */
        .game-board {
            display: grid;
            gap: 10px;
            justify-content: center;
            margin: 0 auto;
            max-width: 100%;
        }

        /* Th·∫ª b√†i (Card) */
        .card {
            background-color: transparent;
            width: 70px; /* K√≠ch th∆∞·ªõc th·∫ª */
            height: 90px;
            perspective: 1000px; /* T·∫°o hi·ªáu ·ª©ng 3D */
            cursor: pointer;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
        }

        /* M·∫∑t sau (khi ch∆∞a l·∫≠t) - M√†u x√°m */
        .card-front {
            background-color: #444;
            color: white;
        }

        /* M·∫∑t tr∆∞·ªõc (khi l·∫≠t l√™n) - C√≥ vi·ªÅn m√†u */
        .card-back {
            background-color: #2a2a2a;
            transform: rotateY(180deg);
            border: 2px solid transparent;
            /* T·∫°o hi·ªáu ·ª©ng vi·ªÅn c·∫ßu v·ªìng nh∆∞ trong ·∫£nh */
            background-image: linear-gradient(#2a2a2a, #2a2a2a), 
                              linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet);
            background-origin: border-box;
            background-clip: content-box, border-box;
        }
        
        /* Icon trong th·∫ª */
        .card-back span {
            font-size: 35px; /* K√≠ch th∆∞·ªõc icon */
        }

    </style>
</head>
<body>

    <h1>S·ª± ki·ªán l·∫≠t th·∫ª Play<br>Together</h1>

    <div class="timer-container">
        ‚è∞ K·∫øt th√∫c sau: <span id="countdown">ƒêang t·∫£i...</span>
    </div>

    <div class="controls">
        <label>H√†ng <input type="number" id="rows" value="4" min="2" max="6"></label>
        <label>C·ªôt <input type="number" id="cols" value="4" min="2" max="6"></label>
        <button onclick="createGame()">T·∫°o m·ªõi</button>
    </div>
    <div class="controls">
        <button class="btn-back" onclick="alert('Quay l·∫°i menu ch√≠nh')">Quay l·∫°i</button>
    </div>

    <div class="game-board" id="gameBoard">
        </div>

    <script>
        // JAVASCRIPT: Logic Game

        // 1. Logic B·ªô ƒë·∫øm ng∆∞·ª£c (Gi·∫£ l·∫≠p 11 ng√†y nh∆∞ ·∫£nh)
        const targetDate = new Date();
        targetDate.setDate(targetDate.getDate() + 11); // Th√™m 11 ng√†y
        targetDate.setHours(targetDate.getHours() + 13);
        targetDate.setMinutes(targetDate.getMinutes() + 17);

        function updateTimer() {
            const now = new Date().getTime();
            const distance = targetDate - now;

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById("countdown").innerHTML = 
                `${days} ng√†y : ${hours} gi·ªù : ${minutes} ph√∫t : ${seconds} gi√¢y`;
        }
        setInterval(updateTimer, 1000);

        // 2. Danh s√°ch c√°c Icon (D√πng Emoji thay cho ·∫£nh)
        const iconsLibrary = [
            'ü™Ñ', '‚öì', '‚ò∏Ô∏è', 'üõ≥Ô∏è', 'üéµ', 'üç∑', 'üîç', 'üß≠', '‚õµ', '‚≠ê', 'üíé', 'üéÅ'
        ];

        let flippedCards = [];
        let matchedCards = [];

        // 3. H√†m t·∫°o game
        function createGame() {
            const rows = parseInt(document.getElementById('rows').value);
            const cols = parseInt(document.getElementById('cols').value);
            const board = document.getElementById('gameBoard');
            
            // Reset game
            board.innerHTML = '';
            board.style.gridTemplateColumns = `repeat(${cols}, 70px)`;
            flippedCards = [];
            matchedCards = [];

            const totalCards = rows * cols;
            // C·∫ßn s·ªë c·∫∑p icon b·∫±ng m·ªôt n·ª≠a t·ªïng s·ªë th·∫ª
            const pairsCount = Math.floor(totalCards / 2); 
            
            let gameIcons = [];
            // L·∫•y icon t·ª´ th∆∞ vi·ªán v√† nh√¢n ƒë√¥i ƒë·ªÉ t·∫°o c·∫∑p
            for (let i = 0; i < pairsCount; i++) {
                const icon = iconsLibrary[i % iconsLibrary.length];
                gameIcons.push(icon);
                gameIcons.push(icon);
            }

            // N·∫øu s·ªë l∆∞·ª£ng th·∫ª l·∫ª, th√™m 1 th·∫ª r·ªóng ho·∫∑c th·∫ª Joker (x·ª≠ l√Ω ƒë∆°n gi·∫£n: b·ªè qua)
            if (totalCards % 2 !== 0) {
                gameIcons.push('‚ùì');
            }

            // Tr·ªôn ng·∫´u nhi√™n (Shuffle)
            gameIcons.sort(() => 0.5 - Math.random());

            // T·∫°o HTML cho t·ª´ng th·∫ª
            gameIcons.forEach((icon, index) => {
                const card = document.createElement('div');
                card.classList.add('card');
                card.dataset.index = index;
                card.dataset.icon = icon;

                card.innerHTML = `
                    <div class="card-inner">
                        <div class="card-front"></div>
                        <div class="card-back">
                            <span>${icon}</span>
                        </div>
                    </div>
                `;

                card.addEventListener('click', () => flipCard(card));
                board.appendChild(card);
            });
        }

        // 4. Logic l·∫≠t th·∫ª
        function flipCard(card) {
            // Ch·∫∑n l·∫≠t n·∫øu ƒë√£ l·∫≠t 2 l√°, ho·∫∑c l·∫≠t l·∫°i l√° v·ª´a l·∫≠t, ho·∫∑c l√° ƒë√£ ho√†n th√†nh
            if (flippedCards.length >= 2 || card.classList.contains('flipped') || matchedCards.includes(card)) {
                return;
            }

            card.classList.add('flipped');
            flippedCards.push(card);

            if (flippedCards.length === 2) {
                checkMatch();
            }
        }

        function checkMatch() {
            const [card1, card2] = flippedCards;
            
            if (card1.dataset.icon === card2.dataset.icon) {
                // Kh·ªõp
                matchedCards.push(card1, card2);
                flippedCards = [];
                // Ki·ªÉm tra chi·∫øn th·∫Øng (t√πy ch·ªçn)
            } else {
                // Kh√¥ng kh·ªõp - √∫p l·∫°i sau 1 gi√¢y
                setTimeout(() => {
                    card1.classList.remove('flipped');
                    card2.classList.remove('flipped');
                    flippedCards = [];
                }, 1000);
            }
        }

        // Kh·ªüi t·∫°o game l·∫ßn ƒë·∫ßu
        createGame();
    </script>
</body>
</html>
